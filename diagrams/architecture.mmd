%% Mermaid architecture diagram for Question Creator Application
%% File: diagrams/architecture.mmd
flowchart TD
  Browser[Browser / User]
  FastAPI[FastAPI app<br/>(app.py)]
  Docs[static/docs/ (uploaded PDFs)]
  Helper[src/helper.py<br/>LLM pipeline]
  PDFLoader[PDF Loader<br/>(pypdf / PyPDF2)]
  Splitter[Text Splitter & Embedding]
  VectorDB[FAISS vector store]
  LLM[LLM Chains / OpenAI]
  Output[static/output/QA.csv]

  Browser -->|POST /upload| FastAPI
  FastAPI -->|save file| Docs
  FastAPI -->|POST /analyze| Helper
  Helper -->|load PDF| PDFLoader
  PDFLoader -->|extract text| Splitter
  Splitter -->|create embeddings| VectorDB
  VectorDB -->|retrieve context| Helper
  Helper -->|call LLM Chains| LLM
  LLM -->|generate Q/A| Helper
  Helper -->|write CSV| Output
  Browser -->|GET /static/output/QA.csv| Output

  subgraph App_Layer[Application]
    FastAPI
    Helper
  end

  subgraph Storage[Storage & Data]
    Docs
    VectorDB
    Output
  end

  classDef infra fill:#f8f9fa,stroke:#333,stroke-width:1px;
  class App_Layer,Storage infra;
